#Script to run 3 python scripts in parallel on the publisher side.
#Run by using the following line in the correct directory in terminal: bash runPythonScripts <ipaddress of raspberry pi>
#$1 represents the passed argument (ipaddress).

#Compile C++ scripts

sudo cc ledMicroserviceSubscriber.cpp -o ledSub -lpaho-mqtt3c -lwiringPi -lstdc++
sudo cc HumidityTemperatureMicroservicePublisher.cpp -o humTempPub -lpaho-mqtt3c -lwiringPi -lstdc++
sudo cc pirMicroservicePublisher.cpp -o pirPub -lpaho-mqtt3c -lwiringPi -lstdc++

sleep 5

/usr/bin/time -v -o memoryResultsCpp.txt -a ./ledSub $1 &
/usr/bin/time -v -o memoryResultsCpp.txt -a ./humTempPub $1 &
/usr/bin/time -v -o memoryResultsCpp.txt -a ./pirPub $1

exit